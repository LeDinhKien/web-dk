{% extends "_base.html" %}
{% block title %}Welcome!{% endblock %}

<!--CSS-->
{% block head %}

    <link rel="stylesheet" type="text/css" href="/stylesheets/item.css">
    <style type="text/css">
        body {
            padding-top: 60px;
        }

        #carousel-example-generic {
            padding: 20px;
            background: url("/images/background-slide.jpg");
        }
    </style>
{% endblock head %}

<!-- Content -->
{% block content %}

    <!-- Carousel -->
    <div id="carousel-container" class="container {% if not has_product %} wrapper {% endif %}">

        <div class="row">

            <div class="col-md-12">

                <div id="carousel-example-generic" class="carousel slide" data-ride="carousel">
                    <ol class="carousel-indicators">
                        <li data-target="#carousel-example-generic" data-slide-to="0" class="active"></li>
                        <li data-target="#carousel-example-generic" data-slide-to="1"></li>
                        <li data-target="#carousel-example-generic" data-slide-to="2"></li>
                    </ol>
                    <div class="carousel-inner">

                        <div class="item active ">
                            <img class="slide-image" src="images/K70RGB.png" alt="">
                        </div>
                        <div class="item ">
                            <img class="slide-image" src="images/rivalfade.png" alt="">
                        </div>
                        <div class="item ">
                            <img class="slide-image" src="images/STEELSERIES_SIBERIA.png" alt="">
                        </div>
                    </div>
                    <a class="left carousel-control" href="#carousel-example-generic" data-slide="prev">
                        <span class="glyphicon glyphicon-chevron-left"></span>
                    </a>
                    <a class="right carousel-control" href="#carousel-example-generic" data-slide="next">
                        <span class="glyphicon glyphicon-chevron-right"></span>
                    </a>
                </div>
                <!--Close carousel slide div-->
            </div>
            <!--Close col-md-12 div-->
        </div>
        <!--Close row div-->
    </div>

    <!-- Main Content -->
    <div class="container">

        {% if has_product %}

            {% if has_sale %}

                <div class="page-header">
                    <h3>ON SALE</h3>
                </div>

                <div class="row">
                    {% for product in products if product.sale %}
                        {% if loop.index < 4 %}
                            <div class="col-xs-12 col-sm-6 col-md-4">
                                <div class="thumbnail">
                                    <a href="/product/{{ product.key.id() }}">
                                        <img class="img-responsive thumb" src="{{ product.image }}" alt="..."></a>

                                    <div class="caption">

                                        <div class="caption-name-price">
                                            <div class="caption-name">
                                                <h4><a href="/product/{{ product.key.id() }}">{{ product.name }}</a>
                                                </h4>
                                            </div>

                                            <div class="caption-prices">
                                                <h4 class="price">${{ product.sale_price }}</h4>
                                                <h4 class="sale">${{ product.price }}</h4>
                                            </div>
                                        </div>

                                        <div class="ratings">
                                            <p>
                                                <span class="glyphicon glyphicon-star"></span>
                                                <span class="glyphicon glyphicon-star"></span>
                                                <span class="glyphicon glyphicon-star"></span>
                                                <span class="glyphicon glyphicon-star"></span>
                                                <span class="glyphicon glyphicon-star-empty"></span>
                                            </p>
                                        </div>

                                        <p class="text-justify">
                                            {{ product.summary }}
                                        </p>

                                        <div class="add_space"></div>

                                        <div id="button_group">

                                            {% if users.get_current_user() and users.is_current_user_admin() %}
                                                <form method="post"
                                                      onsubmit="return confirm('Are you sure you want to delete this product?')"
                                                      action="/delete_product/{{ product.key.id() }}"
                                                      class="custom-btn">
                                                    <button type="submit" class="btn btn-danger">Delete</button>
                                                    {# onclick="post('/delete_product/{{ product.key.id() }}')" #}
                                                </form>

                                                <a href="/edit/{{ product.key.id() }}" class="custom-btn">
                                                    <button class="btn btn-info">Edit</button>
                                                </a>
                                            {% else %}
                                                <a href="#" class="btn btn-primary custom-btn" role="button">Add to
                                                    cart</a>

                                            {% endif %}

                                        </div>
                                    </div>
                                    <!--Close caption div-->
                                </div>
                                <!--Close thumbnail div-->
                            </div>
                            <!--Close col div-->
                        {% endif %}
                    {% endfor %}
                </div>
                <!--Close row div-->

            {% endif %}


            <div class="page-header">
                <h3>Latest products</h3>
            </div>

            <div class="row">
                {% for product in products %}
                    {% if loop.index < 4 %}
                        <div class="col-xs-12 col-sm-6 col-md-4">
                            <div class="thumbnail">
                                <a href="/product/{{ product.key.id() }}">
                                    <img class="img-responsive thumb" src="{{ product.image }}" alt="..."></a>

                                <div class="caption">

                                    <div class="caption-name-price">
                                        <div class="caption-name">
                                            <h4><a href="/product/{{ product.key.id() }}">{{ product.name }}</a></h4>
                                        </div>

                                        <div class="caption-prices">
                                            {% if not product.sale %}
                                                <h4 class="price text-right">${{ product.price }}</h4>
                                            {% else %}
                                                <h4 class="price text-right">${{ product.sale_price }}</h4>
                                                <h4 class="sale text-right">${{ product.price }}</h4>
                                            {% endif %}
                                        </div>
                                    </div>

                                    <div class="ratings">
                                        <p>
                                            <span class="glyphicon glyphicon-star"></span>
                                            <span class="glyphicon glyphicon-star"></span>
                                            <span class="glyphicon glyphicon-star"></span>
                                            <span class="glyphicon glyphicon-star"></span>
                                            <span class="glyphicon glyphicon-star-empty"></span>
                                        </p>
                                    </div>

                                    <p class="text-justify">
                                        {{ product.summary }}
                                    </p>

                                    <div class="add_space"></div>

                                    <div id="button_group">

                                        {% if users.get_current_user() and users.is_current_user_admin() %}
                                            <form method="post"
                                                  onsubmit="return confirm('Are you sure you want to delete this product?')"
                                                  action="/delete_product/{{ product.key.id() }}"
                                                  class="custom-btn">
                                                <button type="submit" class="btn btn-danger">Delete</button>
                                                {# onclick="post('/delete_product/{{ product.key.id() }}')" #}
                                            </form>

                                            <a href="/edit/{{ product.key.id() }}" class="custom-btn">
                                                <button class="btn btn-info">Edit</button>
                                            </a>
                                        {% else %}
                                            <a href="#" class="btn btn-primary custom-btn" role="button">Add to cart</a>

                                        {% endif %}

                                    </div>
                                </div>
                                <!--Close caption div-->
                            </div>
                            <!--Close thumbnail div-->
                        </div>
                        <!--Close col div-->
                    {% endif %}
                {% endfor %}
            </div>
            <!--Close row div-->
        {% endif %}
    </div>
    <!--Close container div-->

{% endblock content %}

<!-- Scripts -->
{% block footer %}
    <script src="/stylesheets/item.js"></script>
{% endblock footer %}